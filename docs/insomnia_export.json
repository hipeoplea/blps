{
  "_type": "export",
  "__export_format": 4,
  "__export_date": "2026-02-18T00:00:00.000Z",
  "__export_source": "codex",
  "resources": [
    {
      "_id": "wrk_airbnb_flow",
      "_type": "workspace",
      "name": "Airbnb Extra Service Flow API",
      "description": "Chat + multiple extra-service requests per chat"
    },
    {
      "_id": "env_airbnb_flow",
      "_type": "environment",
      "parentId": "wrk_airbnb_flow",
      "name": "Base Environment",
      "data": {
        "base_url": "http://localhost:8080/api",
        "chat_id": "",
        "request_id": ""
      }
    },
    {
      "_id": "fld_main",
      "_type": "request_group",
      "parentId": "wrk_airbnb_flow",
      "name": "Main Flow"
    },
    {
      "_id": "req_create_chat",
      "_type": "request",
      "parentId": "fld_main",
      "name": "1. Create chat",
      "method": "POST",
      "url": "{{ base_url }}/chats",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"guestId\": \"guest-100\",\n  \"hostId\": \"host-900\",\n  \"message\": \"Можно организовать ранний check-in с завтраком?\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ]
    },
    {
      "_id": "req_chat_message",
      "_type": "request",
      "parentId": "fld_main",
      "name": "2. Post chat message",
      "method": "POST",
      "url": "{{ base_url }}/chats/{{ chat_id }}/messages",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"sender\": \"HOST\",\n  \"message\": \"45 USD, включает ранний заезд и завтрак.\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ]
    },
    {
      "_id": "req_create_extra",
      "_type": "request",
      "parentId": "fld_main",
      "name": "3. Create extra-service request",
      "method": "POST",
      "url": "{{ base_url }}/chats/{{ chat_id }}/extra-service/request",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"title\": \"Ранний check-in + завтрак\",\n  \"description\": \"Заезд в 10:00 и континентальный завтрак\",\n  \"amount\": 45.00,\n  \"currency\": \"USD\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ]
    },
    {
      "_id": "req_pay_success",
      "_type": "request",
      "parentId": "fld_main",
      "name": "4A. Pay SUCCESS",
      "method": "POST",
      "url": "{{ base_url }}/chats/{{ chat_id }}/extra-service/requests/{{ request_id }}/pay",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"result\": \"SUCCESS\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ]
    },
    {
      "_id": "req_pay_failed",
      "_type": "request",
      "parentId": "fld_main",
      "name": "4B. Pay FAILED",
      "method": "POST",
      "url": "{{ base_url }}/chats/{{ chat_id }}/extra-service/requests/{{ request_id }}/pay",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"result\": \"FAILED\"\n}"
      },
      "headers": [
        {
          "name": "Content-Type",
          "value": "application/json"
        }
      ]
    },
    {
      "_id": "req_reject",
      "_type": "request",
      "parentId": "fld_main",
      "name": "4C. Reject payment",
      "method": "POST",
      "url": "{{ base_url }}/chats/{{ chat_id }}/extra-service/requests/{{ request_id }}/reject"
    },
    {
      "_id": "req_deliver",
      "_type": "request",
      "parentId": "fld_main",
      "name": "5. Mark delivered",
      "method": "POST",
      "url": "{{ base_url }}/chats/{{ chat_id }}/extra-service/requests/{{ request_id }}/deliver"
    },
    {
      "_id": "req_get_chat",
      "_type": "request",
      "parentId": "fld_main",
      "name": "6. Get chat aggregate",
      "method": "GET",
      "url": "{{ base_url }}/chats/{{ chat_id }}"
    }
  ]
}
